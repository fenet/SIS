<%provide(:title, "Dashboard")%>
<section class="content-header">
  <div class="container-fluid">
    <div class="row mb-2">
      <div class="col-sm-6">
        <h1>Dashboard</h1>
      </div>
      <div class="col-sm-6">
        <ol class="breadcrumb float-sm-right">
          <li class="breadcrumb-item"><a href="/">Home</a></li>
          <li class="breadcrumb-item active">Dashboard</li>
        </ol>
      </div>
    </div>
  </div><!-- /.container-fluid -->
</section>

<section class="content">
  <div class="container-fluid">
    <div class="row">
      <div class="col-12 col-md-8">

        <!-- Profile Image -->
        <div class="card card-primary">
          <div class="card-header">
            <h3 class="card-title">My Profile</h3>
          </div>
          <div class="card-body box-profile">
            <div class="text-center">
              <%if current_student.photo.attached? %>
                <%= image_tag(current_student.photo, size: '150x150', class: "profile-user-img img-fluid") if current_student.photo.attached?%>
              <%else %>
                <%= image_tag("blank-profile-picture-973460_640.png", size: '150x150', class: "profile-user-img img-fluid") if !current_student.photo.attached?%>
              <%end%>
            </div>

            <h1 class="profile-username text-center"><b><%= "#{current_student.first_name.upcase} #{current_student.middle_name.upcase} #{current_student.last_name.upcase}"%></b></h1>


            <div class= "text-center my-3">
              <% if current_student.document_verification_status == "pending"%>
                <%= link_to "Edit Profile", edit_student_registration_path, class: "btn btn-outline-primary btn-flat"%>
              <%end%>
            </div>
            <ul class="list-group list-group-unbordered mb-3">
              <li class="list-group-item mx-3">
                <b>Student Fullname</b> <a class="text-muted float-right"><%= "#{current_student.first_name.upcase} #{current_student.middle_name.upcase} #{current_student.last_name.upcase}"%></a>
              </li>
              <li class="list-group-item mx-3">
                <b>Student ID</b> <a class="text-muted float-right"><%= current_student.student_id.present? ? current_student.student_id : "Not Assigned Yet"%></a>
              </li>
              <li class="list-group-item mx-3">
                <b>Prorgam</b> <a class="text-muted float-right"><%= current_student.program.program_name%></a>
              </li>
              <li class="list-group-item mx-3">
                <b>Department</b> <a class="text-muted float-right"><%= current_student.department.department_name%></a>
              </li>
              <li class="list-group-item mx-3">
                <b>Admission Type</b> <a class="text-muted float-right"><%= current_student.admission_type%></a>
              </li>
              <li class="list-group-item mx-3">
                <b>Study Level</b> <a class="text-muted float-right"><%= current_student.study_level%></a>
              </li>
              <li class="list-group-item mx-3">
                <b>Year</b> <a class="text-muted float-right"><%= current_student.year%></a>
              </li>
              <% if current_student.section&.section_full_name %>
              <li class="list-group-item mx-3">
                <b>Section</b> <a class="text-muted float-right"><%= current_student.section.section_full_name %></a>
              </li>
            <% end %>
            
              <li class="list-group-item mx-3">
                <b>Documents</b><%= link_to "click here to see the attachments", documents_path, class: "text-blue float-right"%>
              </li>
              <li class="list-group-item mx-3">
                <b>Account Verification</b> <a class="float-right badge badge-info p-2 text-white"><%= current_student.account_verification_status%></a>
              </li>
            </ul>


          </div>
          <!-- /.card-body -->
        </div>  
      </div>
      <!-- <div class="col-12 col-md-4">
        <% unless @student_grades.blank?%>
       <div class="col-12">
        <div class="card card-success">
          <div class="card-header">
            <h3 class="card-title">
              <strong>Year <%=current_student.year %> Semester <%=current_student.semester%> student grade </strong>
            </h3>
            <div class="card-tools">
              <button type="button" class="btn btn-tool" data-card-widget="collapse">
                <i class="fas fa-minus"></i>
              </button>
              <button type="button" class="btn btn-tool" data-card-widget="remove">
                <i class="fas fa-times"></i>
              </button>
            </div>
          </div>
               <table class="card-body m-4" style="padding: 10px">
             <thead> 
              <tr class="p-3">
                <th>Course Title </th>
                <th>Grade letter </th>
                <th>Total Mark </th>
              </tr>
              </thead>
              <tbody class="p-5">
             <%@student_grades.each do |grade|%>
             <tr> 
              <td><%=grade.course.course_title%></td>
              <td><%=grade.letter_grade%></td>
              <td><%=grade.assesment_total%></td>
               </tr>
             <%end%>
              </tbody>
          </table>
         </div>
   
        </div>
<%end%> -->



<div class="col-12 col-md-4">
  <% unless @student_grades.blank? %>
  <div class="col-12">
    <div class="card card-success">
      <div class="card-header">
        <h3 class="card-title">
          <strong>Year <%= current_student.year %> Semester <%= current_student.semester %> Student Grades</strong>
        </h3>
        <div class="card-tools">
          <button type="button" class="btn btn-tool" data-card-widget="collapse">
            <i class="fas fa-minus"></i>
          </button>
          <button type="button" class="btn btn-tool" data-card-widget="remove">
            <i class="fas fa-times"></i>
          </button>
        </div>
      </div>
      <table class="card-body m-4" style="padding: 10px">
        <thead>
          <tr class="p-3">
            <th>Course Title</th>
            <th>Grade Letter</th>
            <th>Total Mark</th>
          </tr>
        </thead>
        <tbody class="p-5">
          <% @student_grades.each do |grade| %>
          <tr>
            <td><%= grade.course.course_title %></td>
            <td><%= grade.letter_grade %></td>
            <td><%= grade.assesment_total %></td>
            <td>
            <%= link_to 'Request Grade Change', new_grade_change_path(course_id: grade.course.id, grade_id: grade.id), class: 'btn btn-primary' %>

          
            </td>
          </tr>
          <% end %>
        </tbody>
      </table>
      <div class="card-footer">
     

      <% if @course && @course.id %>
       <%= link_to 'Request Grade Change', new_grade_change_path(course_id: @course.id) %>
     <% end %>
        </div>
    </div>
  </div>
  <% end %>
</div>

         #<!-- <% if @verified_makeup_exam %>
          #    <div class="alert alert-warning" role="alert">
          #      You have a verified makeup exam. Please <%= link_to "pay for the makeup exam", pay_payment_path(makeup_exam_id: @verified_makeup_exam.id) %>.
          #    </div>
          #  <% end %> -->
          

        <%= render 'instruction'%>
        <div class="card card-primary">
          <div class="card-header">
            <h3 class="card-title">Basic Information</h3>
          </div>
          <div class="card-body box-profile">
            <ul class="list-group list-group-unbordered mb-3">
              <li class="list-group-item mx-3">
                <b>Email</b> <a class="text-muted float-right"><%= current_student.email%></a>
              </li>
              <li class="list-group-item mx-3">
                <b>Gender</b> <a class="text-muted float-right"><%= current_student.gender%></a>
              </li>
              <li class="list-group-item mx-3">
                <b>Birth Date</b> <a class="text-muted float-right"><%= current_student.date_of_birth.strftime("%b %d, %Y")%></a>
              </li>
              <li class="list-group-item mx-3">
                <b>Marital Status</b> <a class="text-muted float-right"><%= current_student.marital_status%></a>
              </li>
              <li class="list-group-item mx-3">
                <b>Place Of Birth</b> <a class="text-muted float-right"><%= current_student.place_of_birth%></a>
              </li>
              
            </ul>


          </div>
          <!-- /.card-body -->
        </div>
        
      
</section>